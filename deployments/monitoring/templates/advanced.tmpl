{{ define "telegram.message" }}
{{ if eq .Status "firing" }}ðŸš¨ *ALERT* ðŸš¨{{ else }}âœ… *RESOLVED* âœ…{{ end }}

*{{ .CommonLabels.alertname }}*
{{ .CommonAnnotations.summary }}

{{ range .Alerts }}
*Instance:* {{ .Labels.instance }}
*Severity:* {{ .Labels.severity }}
*Description:* {{ .Annotations.description }}
*Value:* {{ .Annotations.value }}
*Time:* {{ .StartsAt.Format "2006-01-02 15:04:05" }}
{{ if eq .Status "firing" }}*Duration:* {{ .StartsAt | humanizeDuration }}{{ end }}

{{ end }}

[Open Alertmanager](http://your-domain.com:9093) | [Open Grafana](http://your-domain.com:3000)
{{ end }}

{{ define "humanizeDuration" -}}
{{- if le .Seconds 60 -}}
{{ .Seconds | printf "%.0f" }} seconds
{{- else if le .Seconds 3600 -}}
{{ .Minutes | printf "%.0f" }} minutes
{{- else -}}
{{ .Hours | printf "%.1f" }} hours
{{- end -}}
{{- end -}}

{{ define "humanizePercentage" -}}
{{- multiply . 100 | printf "%.1f" }}%
{{- end -}}